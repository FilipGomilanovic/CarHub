<!DOCTYPE html>
{% load crispy_forms_tags %}
<html lang="en">
   <!-- POSTAVLJANJE OGLASA -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" href="/static/dizajn.css">
    {% load static %}
    <script src={% static "skripta.js" %}></script>
    <title>CarHub</title>

</head>

<style>
    body {
      {% load static %}
      background-image: url({% static 'naslovniWall.jpg' %});
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: cover;
      max-width: 100%;
      overflow-x: hidden;
    }
    </style>
<body>



    <div class="row">
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <div class="container-fluid">
                <a href="/pathTest" class="navbar-brand">
                    {% load static %}
                    <img src={% static "carhublogo.png" %}  alt="Logo" style="width: 100px;" class="rounded">
                </a>

                    <div class="dropdown">
                        <button type="button" class="btn-danger dropdown-toggle" data-bs-toggle="dropdown">
                           {{user.username}}
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="/profilKorisnika" class="dropdown-item">Pregled profila</a></li>
                            <li><a href="/cet/0" class="dropdown-item">Poruke</a></li>
                            <li><a href="/logout" class="dropdown-item">Odjavi se</a></li>

                        </ul>
                    </div>



            </div>


        </nav>

    </div>


    <div class="row">
        <div class="col-sm-3">
        </div>

        <div class=" col-sm-7 box"; style="margin-top:1.3% ;"  ">


         <div style="width:50%;float:left; ">

              <form  method="post" style="text-align:justify;color: white;" enctype="multipart/form-data"  >
              <label for="" style="font-size:15px;">Brend:</label><select class="form-select" id="brend" name="dropdown_Brend"  onchange="ubaciModele() ">
                <option value="nemaIzbora">Izaberite brend</option>
                  {% for brend in brendovi %}
                      <option value="{{ brend.brend }}">{{ brend.brend }}</option>
                  {% endfor %}
                   </select>
                  <br>
                  <label for="" style="font-size:15px;">Model:</label><select class="form-select" name="dropdown_Model"  id="modeli">
                    <option value="nemaIzbora">Izaberite model</option>
                  </select>
                  <br>
                  <input required name="images" type="file" multiple class="form-control-file form-select">


                  {% csrf_token %}
                 {{ forma_postaviOglas|crispy}}

        </div>

        <div style="width:50%;float:left ;padding-left: 20px;">

                <div>
                <input type="radio" id="radio1" name="izbor" style="margin-top: 20px" value="prodaja"><font style="color: white; font-size: 18px">
                PRODAJA</font>
                </div>

               <div id="sell">
                <input type="text" name="cenaProdaja"  style="margin-top: 20px; align-self: center" placeholder="Cena">
               </div>

               <div>
                <input type="radio" id="radio2" name="izbor" style="margin-top: 30px"><font style="color: white; font-size: 18px" value="iznajmi"> IZNAJMLJIVANJE</font>
               </div>

               <div id="rent">
                <input type="text" name="cenaIznajmljivanje" style="margin-top:10px; align-self: center" placeholder="Cena po danu">

                <input type="text" name="Grad" style="margin-top: 10px; align-self: center" placeholder="Grad">

               </div>


               <div>
                <textarea id="textarea" placeholder="Dodatne informacije" rows="2" cols="50" style="margin-top: 10px"></textarea>
               </div>



                  <input type="submit" name="submit" class="btn" style="margin-top:10px ;">
             </form>
        </div>




</div>
</div>

</body>
</html>
<script>

    function removeOptions(selectElement) {
        var i, L = selectElement.options.length - 1;
       for(i = L; i >= 0; i--) {
          selectElement.remove(i);
       }
    }

    function filtrirajModele(value){
        var data = JSON.parse("{{ data|escapejs }}");
        let niz = [];

        for(var x in data){
            if(value == data[x][0]){
                niz.push(data[x][1]);
            }
        }
        return niz;
    }

    function ubaciModele(){
        var selectBrend = document.getElementById("brend");
        var value = selectBrend.options[selectBrend.selectedIndex].value;
        var selectModel = document.getElementById("modeli");
        removeOptions(selectModel);
        let naziviModela = filtrirajModele(value);
        var opt = new Option("Izaberite model", "nijeIzabrano")
        selectModel.appendChild(opt);
        for(var i = 0; i < naziviModela.length; i++){
            var opt = new Option(naziviModela[i], naziviModela[i])
            selectModel.appendChild(opt);
        }
        naziviModela = [];
    }
</script>